<%- include("includes/head.ejs"); %>

    <body>

        <div id="pageTwo">
            <%- include("includes/navbar.ejs"); %>
                <%- include("includes/intro.ejs"); %>
                    <%- include("includes/education.ejs"); %>
                        <section id="skillsSection" >

                            <%- include("includes/skillsleft.ejs"); %>

                                <div id="skillsInDetail">
                                    <div id="skillDetailHead">
                                        <span class="skillNameHeading">
                                            <%= selectedSkill.skillName %>
                                        </span>
                                        <a href="/portfolio/<%= selectedSkill.skillName %>/addtopics" id="addDetailBtn">
                                            + Add topic
                                        </a>
                                    </div>

                                    <div id="skillDetailBody">

                                        <% for (let topic of selectedSkill.topics) { %>
                                            <div class="topicBox">

    <div class="topicName">
        <%= topic.topicName || "Topics" %>
    </div>

    <div class="topicActions">

        <!-- Add Core Skill -->
        <a href="/portfolio/<%= selectedSkill.skillName %>/<%= topic.topicName %>/addcoreskill"
           class="actionBtn addBtn">
           + Add
        </a>

        <!-- Edit Topic -->
        <a href="/portfolio/<%= selectedSkill.skillName %>/<%= topic.topicName %>/edit"
           class="actionBtn editBtn">
           Edit
        </a>

        <!-- Delete Topic -->
        <form method="POST"
              action="/portfolio/<%= selectedSkill.skillName %>/<%= topic.topicName %>?_method=DELETE"
              class="inlineForm">

            <button type="submit" class="actionBtn deleteBtn" onclick="return confirm('Delete this topic?')">
                Delete
            </button>

        </form>

    </div>

</div>


                                            <% if (topic.coreSkills && topic.coreSkills.length> 0) { %>
                                                <% for (let core of topic.coreSkills) { %>
                                                    <div class="coreSkillBox">

    <div class="coreSkillName">
        <%= core %>
    </div>

    <div class="coreSkillActions">

        <!-- Edit -->
        <a href="/portfolio/<%= selectedSkill.skillName %>/<%= topic.topicName %>/<%= core %>/edit"
           class="coreBtn editBtn">
           Edit
        </a>

        <!-- Delete -->
        <form method="POST"
              action="/portfolio/<%= selectedSkill.skillName %>/<%= topic.topicName %>/<%= core %>/delete?_method=DELETE">

            <button class="coreBtn deleteBtn">
                Delete
            </button>

        </form>

    </div>

</div>
<% } %>
                                                            <% } %>

                                                                <% } %>

                                    </div>


                                </div>


                        </section>
                        <%- include("includes/projects.ejs"); %>

        </div>
        <script src="app.js" type="module"></script>
        <script>
            const sectionId = "<%= scrollTo %>";
            if (sectionId) {
                const el = document.getElementById(sectionId);
                if (el) {
                    el.scrollIntoView({ behavior: "smooth" });
                }
            }
        </script>
        
        <%- include("includes/footer.ejs"); %>
            <%- include("includes/jsscript.ejs"); %>
    </body>

    </html>